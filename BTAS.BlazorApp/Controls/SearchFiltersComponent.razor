@*<div class="card-header p-1">
    Search Filters
    <select bind-value="@dynamicFilter.Column" class="form-control select2" style="width: 100%;">
        <option disabled selected hidden>-select-</option>
        <option>Active</option>
        <option>Closed</option>
    </select>
</div>*@

@*<div class="card-body-main">*@
@*<div class="main-card mb-3 card">*@
<div class="card">
    <div class="card-header">
        @*  <div class="row-1">*@
        <h3 class="card-title">Search Filters</h3>
        <div class="card-tools">
            <button>
                <i class="fa-solid fa-sliders"></i>
            </button>
            <button type="button" class="btn btn-tool" data-card-widget="collapse">
                <i class="fas fa-minus"></i>
            </button>
            @*  </div>*@
        </div>
    </div>
    <div class="card-body">
        <div class="form-row">
            <div class="col-3">

                <label>Column</label>



            </div>
            <div class="col-3">

                <label>Condition</label>


            </div>
            <div class="col-3">

                <label>Value</label>


            </div>
            <div class="col-3">
            </div>

        </div>
        <div class="row">
            <div class="col-3">
                <select bind-value="@dynamicFilter.Column" class="form-control select2" style="width: 100%;">
                    <option disabled selected hidden>-select-</option>
                    <option>Active</option>
                    <option>Closed</option>
                </select>
            </div>
            <div class="col-3">
                <select bind-value="@dynamicFilter.Condition" class="form-control select2" style="width: 100%;">
                    <option disabled selected hidden>-select-</option>
                    <option>Active</option>
                    <option>Closed</option>
                </select>
            </div>
            <div class="col-3">
                <select bind-value="@dynamicFilter.Value" class="form-control select2" style="width: 100%;">
                    <option disabled selected hidden>-select-</option>
                    <option>Active</option>
                    <option>Closed</option>
                </select>
            </div>
            <div class="col-3">
                <button type="button" class="plus-btn" data-toggle="dropdown">
                    <i class="fas fa-plus"></i>
                </button>
            </div>


        </div>
        @*<div class="form-row">
        <div class="col-3">
        <div class="form-group">
        <label>References</label>
        <select bind-value="@filter.ReferenceNo" class="form-control select2" style="width: 100%;">
        <option disabled selected hidden>-select-</option>
        <option>Active</option>
        <option>Closed</option>
        </select>
        <textarea @oninput="HandleOnChange" class="form-control multitext-field" rows="3" placeholder="List one per line ..."></textarea>
        </div>
        </div>
        <div class="col-3">
        <div class="form-group">
        <label>Agent</label>
        <select bind-value="@filter.AgentNo" class="form-control select2" style="width: 100%;">
        <option disabled selected hidden>-select-</option>
        <option>Active</option>
        <option>Closed</option>
        </select>
        <textarea bind-value="@filter.AgentList" class="form-control multitext-field" rows="3" placeholder="List one per line ..."></textarea>
        </div>
        </div>
        <div class="col-3">
        <div class="form-group">
        <label>Closed</label>
        <select bind-value="@filter.Closed" class="form-control select2" style="width: 100%;">
        <option disabled selected hidden>-select-</option>
        <option>Active</option>
        <option>Closed</option>
        </select>
        </div>
        </div>
        <div class="col-3">
        <div class="form-group">
        <label>Mode</label>
        <select bind-value="@filter.Mode" class="form-control select2" style="width: 100%;">
        <option disabled selected hidden>-select-</option>
        <option>Active</option>
        <option>Closed</option>
        </select>
        </div>
        </div>
        </div>*@



        @*@{
        foreach (var filter in dynamicFilters)
        {
        <div class="form-row">
        <div class="col-3">
        <div class="form-group">
        <label>Column</label>
        <select bind-value="@filter.Column" class="form-control form-control select2" style="width: 100%;">
        <option disabled selected hidden>-select-</option>
        <option>Active</option>
        <option>Closed</option>
        </select>
        </div>
        </div>
        <div class="col-3">
        <div class="form-group">
        <label>Condition</label>
        <select bind-value="@filter.Condition" class="form-control form-control select2" style="width: 100%;">
        <option disabled selected hidden>-select-</option>
        <option>Active</option>
        <option>Closed</option>
        </select>
        </div>
        </div>
        <div class="col-3">
        <div class="form-group">
        <label>Value</label>
        <select bind-value="@filter.Value" class="form-control form-control select2" style="width: 100%;">
        <option disabled selected hidden>-select-</option>
        <option>Active</option>
        <option>Closed</option>
        </select>
        </div>
        </div>
        </div>
        }

        }*@

        @*<div class="form-row">
        <div class="col-3">
        <div class="form-group">
        <label>Date:</label>
        <input type="date" class="form-control text-field" format-value="yyyy-MM-dd" @bind-value="@filter.DateSpecific">
        </div>
        </div>
        </div>
        <div class="form-row">
        <div class="col-3">
        <div class="form-group">
        <label>Date From:</label>
        <input type="date" class="form-control text-field" format-value="yyyy-MM-dd" @bind-value="@filter.DateFrom">
        </div>
        </div>
        <div class="col-3">
        <div class="form-group">
        <label>Date To:</label>
        <input type="date" class="form-control text-field" format-value="yyyy-MM-dd" @bind-value="@filter.DateTo">
        </div>
        </div>
        </div>*@


    </div>
</div>
@*</div>*@
@*</div>*@


@code {
    [Parameter]
    public SearchFilter filter { get; set; }

    [Parameter]
    public List<DynamicSearchFilters> dynamicFilters { get; set; } = new();

    private DynamicSearchFilters dynamicFilter { get; set; } = new();

    private string data;

    [Parameter] public string ChildData { get; set; }

    [Parameter]
    public EventCallback<string> ChildDataChanged { get; set; }

    //protected override async Task OnInitializedAsync()
    //{
    //    var result = await _filterService.
    //    return base.OnInitializedAsync();
    //}

    private async Task HandleOnChange(ChangeEventArgs args)
    {
        data = args.Value.ToString();

        await ChildDataChanged.InvokeAsync(data);

        filter.ReferenceList = new();

        if (data.Contains("\n"))
        {
            foreach (var s in data.Split("\n"))
            {
                if (s != "")
                    filter.ReferenceList.Add(s);
            }
        }
        else
        {
            if (data != "")
                filter.ReferenceList.Add(data);
        }
    }

    protected override void OnParametersSet()
    {
        base.OnParametersSet();
    }
}
